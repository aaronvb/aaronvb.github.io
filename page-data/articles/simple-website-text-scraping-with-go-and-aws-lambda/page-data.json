{"componentChunkName":"component---src-templates-post-template-js","path":"/articles/simple-website-text-scraping-with-go-and-aws-lambda","result":{"data":{"markdownRemark":{"id":"7f2b5fa3-f45a-513d-a9ed-d0fb9e5e2718","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/07079eba5247fdfc0d3d72d354fa6c86/d165a/header.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.916666666666668%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAGABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAIDBP/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAc8AoB//xAAYEAADAQEAAAAAAAAAAAAAAAAAAQISA//aAAgBAQABBQJNOOs5NUf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAZEAABBQAAAAAAAAAAAAAAAAAAAQIRMTL/2gAIAQEABj8ColppT//EABoQAQADAAMAAAAAAAAAAAAAAAEAEUExYZH/2gAIAQEAAT8hA3sL6h4ByBcek//aAAwDAQACAAMAAAAQAA//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAaEAEAAwADAAAAAAAAAAAAAAABABFhIUGR/9oACAEBAAE/ECUrKxbbcj7BhFSK6cyCUExz/9k='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/07079eba5247fdfc0d3d72d354fa6c86/8ac56/header.webp 240w,\n/static/07079eba5247fdfc0d3d72d354fa6c86/d3be9/header.webp 480w,\n/static/07079eba5247fdfc0d3d72d354fa6c86/e46b2/header.webp 960w,\n/static/07079eba5247fdfc0d3d72d354fa6c86/7f403/header.webp 1400w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/07079eba5247fdfc0d3d72d354fa6c86/09b79/header.jpg 240w,\n/static/07079eba5247fdfc0d3d72d354fa6c86/7cc5e/header.jpg 480w,\n/static/07079eba5247fdfc0d3d72d354fa6c86/6a068/header.jpg 960w,\n/static/07079eba5247fdfc0d3d72d354fa6c86/d165a/header.jpg 1400w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/jpeg\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/07079eba5247fdfc0d3d72d354fa6c86/6a068/header.jpg\"\n          alt=\"header\"\n          title=\"header\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n  </a>\n    </span></p>\n<p>Recently I needed to know when certain websites were updated with specific text. I decided to utilize AWS Lambda to save on cost of hosting a server, and use Go because it’s fast, and also because it’s one of the supported languages on AWS Lambda. I am also using AWS SES to send me e-mail notifications when results are found.</p>\n<p>Bellow I’ll be showing you how to compile the Go script, setup the AWS Lambda function, and configure a cron type job to run the script every hour.</p>\n<p>First, clone the repo contains the script.</p>\n<p><a href=\"https://github.com/aaronvb/aws_lambda_go_scraper\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">github.com/aaronvb/aws_lambda_go_scraper</a></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ git clone git@github.com:aaronvb/aws_lambda_go_scraper.git\n$ cd aws_lambda_go_scraper</code></pre></div>\n<p>Then we’ll build the Go script and zip it up for AWS Lambda.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ GOOS=linux GOARCH=amd64 go build -o main lambda_scraper.go\n$ zip main.zip main</code></pre></div>\n<p>Create an AWS Lambda function with the Go runtime, and select or create a role that has access to AWS SES. We’ll be using AWS SES to send out the e-mail notification.</p>\n<p>Once the AWS Lambda function is created, upload the zip file and make sure the handler is set to <code class=\"language-text\">main</code>.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b669105ac7d78b72574bd30db06a9d2d/2cefc/function.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 24.583333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsSAAALEgHS3X78AAAAiElEQVQY042PWQ7DIAxEff9rthFS1hbbScAsnRJFlZKfPlkGhhkZaF4W59wwjuu27SchhP3GXSTvue8HFs25pJQyllJExMxyA2KtFUl42v0PUtVpmuFGBgF0WEU0xpga2EBBhxPhQ0QSIr3e/vHsmBmHY2z9GxJVz3iRolgE/45mmPPtl7qI0T6FFCRdB9VzCQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/b669105ac7d78b72574bd30db06a9d2d/8ac56/function.webp 240w,\n/static/b669105ac7d78b72574bd30db06a9d2d/d3be9/function.webp 480w,\n/static/b669105ac7d78b72574bd30db06a9d2d/e46b2/function.webp 960w,\n/static/b669105ac7d78b72574bd30db06a9d2d/7f403/function.webp 1400w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/b669105ac7d78b72574bd30db06a9d2d/8ff5a/function.png 240w,\n/static/b669105ac7d78b72574bd30db06a9d2d/e85cb/function.png 480w,\n/static/b669105ac7d78b72574bd30db06a9d2d/d9199/function.png 960w,\n/static/b669105ac7d78b72574bd30db06a9d2d/2cefc/function.png 1400w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/b669105ac7d78b72574bd30db06a9d2d/d9199/function.png\"\n          alt=\"function\"\n          title=\"function\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n  </a>\n    </span></p>\n<p>Next, create 3 environment variables: <code class=\"language-text\">RECIPIENT</code> will be the email which receives the notification, <code class=\"language-text\">SENDER</code> which will be the email address that sends the notification, and last <code class=\"language-text\">SES_LOCATION</code> which is the location of your SES(ie: us-west-2).</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6a6b199b17cdff6ca587ad56f51cf998/2cefc/env_variables.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 29.583333333333332%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsSAAALEgHS3X78AAAAoklEQVQY022PCRKDIAxFuf9BRauyyKIhwemX1umibwIZyPajZmM6rTvd98NAF0opOHQTOC4VYzTG+gWE7WTFIcp5TSlluBfbh5S3mEmFEGZjRaQwv+c0w3MJAYIe44js7xBsthZVCjORgb51ryzMIofB1+qc11pDUeHzvxmYpglNFcTEJg465ZdjZea673JhJUKhwkrOOWOt957vaBv808TxE6tyW8VppCfdAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/6a6b199b17cdff6ca587ad56f51cf998/8ac56/env_variables.webp 240w,\n/static/6a6b199b17cdff6ca587ad56f51cf998/d3be9/env_variables.webp 480w,\n/static/6a6b199b17cdff6ca587ad56f51cf998/e46b2/env_variables.webp 960w,\n/static/6a6b199b17cdff6ca587ad56f51cf998/7f403/env_variables.webp 1400w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/6a6b199b17cdff6ca587ad56f51cf998/8ff5a/env_variables.png 240w,\n/static/6a6b199b17cdff6ca587ad56f51cf998/e85cb/env_variables.png 480w,\n/static/6a6b199b17cdff6ca587ad56f51cf998/d9199/env_variables.png 960w,\n/static/6a6b199b17cdff6ca587ad56f51cf998/2cefc/env_variables.png 1400w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/6a6b199b17cdff6ca587ad56f51cf998/d9199/env_variables.png\"\n          alt=\"env_variables\"\n          title=\"env_variables\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n  </a>\n    </span></p>\n<p>Don’t forget to add the email address to SES and verify it so it can receive emails.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c92871db7e8a540ae89742ce91113ac0/2cefc/ses.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 16.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAAsSAAALEgHS3X78AAAAZ0lEQVQI15XNORKAIBBEUe5/QUulalgGtHBEYUgFl0hDX/CTDlqEEJxziGitIaJ1JWWwkxqdn6cPtGhuVmsFAN57wZyXhYYRul6CMimlnHPhK+lt2zepxusjxsh8z6UU0R61tqO2v07fn6jLUKQ7FgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/c92871db7e8a540ae89742ce91113ac0/8ac56/ses.webp 240w,\n/static/c92871db7e8a540ae89742ce91113ac0/d3be9/ses.webp 480w,\n/static/c92871db7e8a540ae89742ce91113ac0/e46b2/ses.webp 960w,\n/static/c92871db7e8a540ae89742ce91113ac0/7f403/ses.webp 1400w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/c92871db7e8a540ae89742ce91113ac0/8ff5a/ses.png 240w,\n/static/c92871db7e8a540ae89742ce91113ac0/e85cb/ses.png 480w,\n/static/c92871db7e8a540ae89742ce91113ac0/d9199/ses.png 960w,\n/static/c92871db7e8a540ae89742ce91113ac0/2cefc/ses.png 1400w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/c92871db7e8a540ae89742ce91113ac0/d9199/ses.png\"\n          alt=\"ses\"\n          title=\"ses\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n  </a>\n    </span></p>\n<p>Now we can create a test event. In the event data pass a JSON hash which has a key <code class=\"language-text\">urls</code> and a string value with the urls you want to scrape, separated by commas, and a key <code class=\"language-text\">words</code>, with a string value of comma separated words you wish to scrape.</p>\n<p>Example:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"urls\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://aaronvb.com,https://aaronvb.com/articles/selection-sort-in-ruby.html\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"words\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ruby,Hawaii,foobar\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/789af4485ee1ca0725fdcfee6d0c2de4/2cefc/test_event.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47.08333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAABE0lEQVQoz4VRi26FIAz1/z9xuVnmA1Gg8roKFHUrRHO3ZMtOTprDSUtLabz3jI3zLKZpBoCUEiLGGANhC9sWLn0jFiNuFY27i8eRE9u2+2g7OlrrtNbLop3zxhhrrdaGHFukJSfn3KwhSgV8mkbOyTrPM+87xc//sO97o59BSOCcU7d1Xf9KPX/iKn56rxRsIdCBrOM4viflgh0x/9b5aGhDtDPaAmXFFDEjxYSprCXFsrJYSD6ZlXQV5pzKm2NKjLF2ED1fOt6/dY9H/05xlFxqmEHOIGpUkxICpFiAfLEo6lA6DwMTyoJZF/OU2oHxSnvjNuuD9bEy3LoKVyINUIrpAxBTRqwTXSQHX5PeGl+ksb8AXckFb5Ut6dsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/789af4485ee1ca0725fdcfee6d0c2de4/8ac56/test_event.webp 240w,\n/static/789af4485ee1ca0725fdcfee6d0c2de4/d3be9/test_event.webp 480w,\n/static/789af4485ee1ca0725fdcfee6d0c2de4/e46b2/test_event.webp 960w,\n/static/789af4485ee1ca0725fdcfee6d0c2de4/7f403/test_event.webp 1400w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/789af4485ee1ca0725fdcfee6d0c2de4/8ff5a/test_event.png 240w,\n/static/789af4485ee1ca0725fdcfee6d0c2de4/e85cb/test_event.png 480w,\n/static/789af4485ee1ca0725fdcfee6d0c2de4/d9199/test_event.png 960w,\n/static/789af4485ee1ca0725fdcfee6d0c2de4/2cefc/test_event.png 1400w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/789af4485ee1ca0725fdcfee6d0c2de4/d9199/test_event.png\"\n          alt=\"test_event\"\n          title=\"test_event\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n  </a>\n    </span></p>\n<p>Click the test button and you should receive a successful function execution with logs and an email.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/682e74fb27bd72244ea95a04a1217cc9/2cefc/test_action.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 7.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAAsSAAALEgHS3X78AAAAYElEQVQI1x2LUQ6AIAxDvf8hVYwIbmw4RMA/G5N+NH19k+Z8EvsjaL5ENJuFeKJgt1JUtdx1vG8fA3lau8zwJGbQKYm4bZ8XR5xYJImubgshwgcmYryhtd6R+stQdn+gfJ1rb7tN60quAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/682e74fb27bd72244ea95a04a1217cc9/8ac56/test_action.webp 240w,\n/static/682e74fb27bd72244ea95a04a1217cc9/d3be9/test_action.webp 480w,\n/static/682e74fb27bd72244ea95a04a1217cc9/e46b2/test_action.webp 960w,\n/static/682e74fb27bd72244ea95a04a1217cc9/7f403/test_action.webp 1400w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/682e74fb27bd72244ea95a04a1217cc9/8ff5a/test_action.png 240w,\n/static/682e74fb27bd72244ea95a04a1217cc9/e85cb/test_action.png 480w,\n/static/682e74fb27bd72244ea95a04a1217cc9/d9199/test_action.png 960w,\n/static/682e74fb27bd72244ea95a04a1217cc9/2cefc/test_action.png 1400w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/682e74fb27bd72244ea95a04a1217cc9/d9199/test_action.png\"\n          alt=\"test_action\"\n          title=\"test_action\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n  </a>\n    </span></p>\n<p>The logs will contain the results, message ID from SES, and any errors while parsing or sending the email.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f48c00a8a89fc7a2a95f6b9f54a94c8e/2cefc/email_example.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 7.916666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAAsSAAALEgHS3X78AAAAUUlEQVQI1z2LOQ7AIAwE+f8rTTCOMVSYo80KpEwx2mInuPtaE+y9W2sxRmZ+DncQUUop5wyrainFzPQQeu9zDoC+1vrHaDDwEBH4PSDD5/bwBxLzbSLhchPSAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/f48c00a8a89fc7a2a95f6b9f54a94c8e/8ac56/email_example.webp 240w,\n/static/f48c00a8a89fc7a2a95f6b9f54a94c8e/d3be9/email_example.webp 480w,\n/static/f48c00a8a89fc7a2a95f6b9f54a94c8e/e46b2/email_example.webp 960w,\n/static/f48c00a8a89fc7a2a95f6b9f54a94c8e/7f403/email_example.webp 1400w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/f48c00a8a89fc7a2a95f6b9f54a94c8e/8ff5a/email_example.png 240w,\n/static/f48c00a8a89fc7a2a95f6b9f54a94c8e/e85cb/email_example.png 480w,\n/static/f48c00a8a89fc7a2a95f6b9f54a94c8e/d9199/email_example.png 960w,\n/static/f48c00a8a89fc7a2a95f6b9f54a94c8e/2cefc/email_example.png 1400w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/f48c00a8a89fc7a2a95f6b9f54a94c8e/d9199/email_example.png\"\n          alt=\"email_example\"\n          title=\"email_example\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n  </a>\n    </span></p>\n<p><em>Success. The websites were scraped and my words were found!</em></p>\n<h2 id=\"lets-automate-this\" style=\"position:relative;\"><a href=\"#lets-automate-this\" aria-label=\"lets automate this permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Let’s Automate This</h2>\n<p>Now that the AWS Lambda function is working, it’s time to automate this and have it run every hour. We’ll pick different words because we know those exist. Let’s pretend we want to know when my personal website will be updated with the words “swift, java, and angular.”</p>\n<p>For this we’ll be using AWS CloudWatch events. So let’s head over there and create a new events rule.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6bb9b08f4aaa8dbe56c84bf67e7103d5/2cefc/create_rule.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.833333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABMElEQVQoz31SzU6GMBDs+z+JdxPPHk18CSM/H1Ao/aPdQikObTQmgnPYkGVmZ3aB9X0vhHg8Hk3TSKlijOu6btuWy5ZSOo4jXQF9JqWEeJ5nPBhjlmWx1jrnSgUJI44bnOJxHLU2aT+xZcAcEfCaiOq6tnYJIay/AA7IzHuC7SRmPopx5HAj71HBgBiaLm+ktcYgtzhEw1tU7z1ztE5CnC1Pp5KIc66UAhvmiI2ltFZGa+d9yvtjKJxBYNZR1w0A5wMiYAq6JqMkl99Abijzcnu5GXPOg4zzoHV5FXhWnxXuUoKUZpnCjnsUojauqdu6qrquQ/KYUfTs56Nd61PCRXEFKM/kISAjLobgMf7rXA4z9H3btoHorwfTSmHY3W8EhIyijPs+aXp+a55eP17e2y9WYn7S4y8xbAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/6bb9b08f4aaa8dbe56c84bf67e7103d5/8ac56/create_rule.webp 240w,\n/static/6bb9b08f4aaa8dbe56c84bf67e7103d5/d3be9/create_rule.webp 480w,\n/static/6bb9b08f4aaa8dbe56c84bf67e7103d5/e46b2/create_rule.webp 960w,\n/static/6bb9b08f4aaa8dbe56c84bf67e7103d5/7f403/create_rule.webp 1400w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/6bb9b08f4aaa8dbe56c84bf67e7103d5/8ff5a/create_rule.png 240w,\n/static/6bb9b08f4aaa8dbe56c84bf67e7103d5/e85cb/create_rule.png 480w,\n/static/6bb9b08f4aaa8dbe56c84bf67e7103d5/d9199/create_rule.png 960w,\n/static/6bb9b08f4aaa8dbe56c84bf67e7103d5/2cefc/create_rule.png 1400w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/6bb9b08f4aaa8dbe56c84bf67e7103d5/d9199/create_rule.png\"\n          alt=\"create_rule\"\n          title=\"create_rule\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n  </a>\n    </span></p>\n<p>First we set the schedule to a fixed rate of 1 hour. Next, choose the Lambda function we created earlier. And finally, the most important part, select Configure input > Constant (JSON text), and paste in the JSON with the data to send to our function (see code below).</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"urls\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://aaronvb.com\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"words\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"swift,java,angular\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Once you fill that in, click Configure details to name the rule and then create it. We now have the script running every hour, scraping our website, searching for the text we provided, and alerting us when it finds it.</p>","fields":{"slug":"/articles/simple-website-text-scraping-with-go-and-aws-lambda","tagSlugs":["/tag/code/","/tag/aws/","/tag/lambda/","/tag/serverless/","/tag/go/"]},"frontmatter":{"date":"2018-06-17","description":"In this article I’ll be showing you how to compile the Go script, setup the AWS Lambda function, and configure a cron type job to run the script every hour.","tags":["Code","AWS","Lambda","Serverless","Go"],"title":"Simple Website Text Scraping with Go and AWS Lambda"}}},"pageContext":{"slug":"/articles/simple-website-text-scraping-with-go-and-aws-lambda"}},"staticQueryHashes":["1251057998","251939775","401334301"]}