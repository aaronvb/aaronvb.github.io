{"componentChunkName":"component---src-templates-post-template-js","path":"/articles/a-simple-react-native-redux-example","result":{"data":{"markdownRemark":{"id":"d0ea1d8d-ee9d-5ddb-9ee1-87fc5cf9bd1f","html":"<p>Working on my latest React Native project, I decided to make the jump from React’s state to Redux.</p>\n<p>I looked through all the examples I could find, the majority were from 2015, and couldn’t find something simple and minimal. Also, a lot of things have changed since 2015, and even 2016 - giving me a good excuse to start from scratch. My first step was to go through the Redux docs and tutorials to give myself a clean slate, instead of just copying code from my previous projects.</p>\n<p><a href=\"http://redux.js.org/docs/basics/ExampleTodoList.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://redux.js.org/docs/basics/ExampleTodoList.html</a></p>\n<p>The above link has a minimal example of a Redux implementation, and is what I used as base for my project.</p>\n<figure>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 498px;\">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/4c507ed003dbabe61d437fefff684af8/79e1b/1.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 66.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAABeUlEQVQoz4WRW1OCUBSFz2/oMpOaaZYEJgKCcOSiHK4CB6/gpbzUg/XQY/3/afcDgplvznnaa++1FlKsyBzHr4qFrWi2ft8eP0b+XBr6fT0oBXHSSFad17E98qZpfprnJy/Jn/sWJ1qsYBaD6u3+E49DTzNI4kRrN85kI7yosjdNvvYgFoPuGJkVhtTFAzPw6Y5MVl6c09VhYIaV+x5I3z5K/4HqjMzwOBhriuHb4YqESxIudEIZXgftgsm/4caTwgk69bBmTXy6pYs92DYcCmfDUbC5AAQCDK9FRAXPsh5c1Njreuem2au2hFIQJpRM5sd1DAs3h88g3USzFzhbHcdaGSic7mbZ/vO43BzO56+fj69veNPV3qdrECoGqpKbrMx0JQn7aXZK5i9DO7mqd8ASeC4GQaTwtTpY0Fw3zp0oM5zUdGiLUystoaRnCAyWN55tEXswDEBb2e6dVwgEXtLz7aPYaGt89ySo3mLzli73qhle1rjSkoFflByiIxVOWToAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;\"></span>\n  <picture>\n        <source srcset=\"/static/4c507ed003dbabe61d437fefff684af8/8ac56/1.webp 240w,\n/static/4c507ed003dbabe61d437fefff684af8/d3be9/1.webp 480w,\n/static/4c507ed003dbabe61d437fefff684af8/71ce1/1.webp 498w\" sizes=\"(max-width: 498px) 100vw, 498px\" type=\"image/webp\">\n        <source srcset=\"/static/4c507ed003dbabe61d437fefff684af8/8ff5a/1.png 240w,\n/static/4c507ed003dbabe61d437fefff684af8/e85cb/1.png 480w,\n/static/4c507ed003dbabe61d437fefff684af8/79e1b/1.png 498w\" sizes=\"(max-width: 498px) 100vw, 498px\" type=\"image/png\">\n        <img class=\"gatsby-resp-image-image\" src=\"/static/4c507ed003dbabe61d437fefff684af8/79e1b/1.png\" alt=\"directory structure\" title=\"directory structure\" loading=\"lazy\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\">\n      </picture>\n  </a>\n    </span>\n  <figcaption>\n    This is the directory structure of the app which contains Components, Containers, and Reducers, pretty common with a standard React/Redux app.\n  </figcaption>\n</figure>\n<figure>\n  <img src=\"/0e0211f619a5030b980b4f549e0d77df/2.gif\" alt=\"example\">\n  <figcaption>Simple React Native Redux Example app running in iPhone Simulator.</figcaption>\n</figure>\n<p>To show the list of items, I’m using the React Native ListView that is using a Redux Store(items) as its dataSource. There are two actions in the Reducer; ADD_ITEM and REMOVE_ITEM.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// Start the sequence of item ID's at 0</span>\n<span class=\"token keyword\">let</span> nextItemId <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Items reducer</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">items</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">state <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">\"ADD_ITEM\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span>\n          id<span class=\"token operator\">:</span> nextItemId<span class=\"token operator\">++</span><span class=\"token punctuation\">,</span>\n          name<span class=\"token operator\">:</span> action<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">,</span>\n          bgColor<span class=\"token operator\">:</span> action<span class=\"token punctuation\">.</span>bgColor\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">\"REMOVE_ITEM\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// Find index of item with matching ID and then</span>\n      <span class=\"token comment\">// remove it from the array by its' index</span>\n      <span class=\"token keyword\">const</span> index <span class=\"token operator\">=</span> state<span class=\"token punctuation\">.</span><span class=\"token function\">findIndex</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x</span> <span class=\"token operator\">=></span> x<span class=\"token punctuation\">.</span>id <span class=\"token operator\">===</span> action<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>state<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> index<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>state<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span>index <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> state<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> items<span class=\"token punctuation\">;</span></code></pre></div>\n<p>The ListView requires a dataSource, and must be re-rendered when the dataSource is updated. To do this, the dataSource gets mapped to a prop using mapStateToPros, and then we connect the Component to it.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">ItemList</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleDestroyItem <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleDestroyItem</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token function\">handleDestroyItem</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">id</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span><span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> type<span class=\"token operator\">:</span> <span class=\"token string\">\"REMOVE_ITEM\"</span><span class=\"token punctuation\">,</span> id <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>ListView\n        style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>container<span class=\"token punctuation\">}</span>\n        enableEmptySections<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">}</span>\n        dataSource<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>dataSource<span class=\"token punctuation\">}</span>\n        renderRow<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">rowData</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n            <span class=\"token operator\">&lt;</span>Item\n              rowData<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>rowData<span class=\"token punctuation\">}</span>\n              handleDestroyItem<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">id</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleDestroyItem</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n            <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n      <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// Handle data source change from redux store</span>\n<span class=\"token keyword\">const</span> dataSource <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ListView<span class=\"token punctuation\">.</span>DataSource</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token function-variable function\">rowHasChanged</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">r1<span class=\"token punctuation\">,</span> r2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> r1 <span class=\"token operator\">!==</span> r2\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">mapStateToProps</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    dataSource<span class=\"token operator\">:</span> dataSource<span class=\"token punctuation\">.</span><span class=\"token function\">cloneWithRows</span><span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\nItemList<span class=\"token punctuation\">.</span>propTypes <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  dataSource<span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>object<span class=\"token punctuation\">,</span>\n  dispatch<span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>func\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>mapStateToProps<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>ItemList<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>View the entire code at <a href=\"https://github.com/aaronvb/react-native-redux-example\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://github.com/aaronvb/react-native-redux-example</a>.</p>","fields":{"slug":"/articles/a-simple-react-native-redux-example","tagSlugs":["/tag/code/","/tag/java-script/","/tag/react-native/","/tag/redux/"]},"frontmatter":{"date":"2017-06-18","description":"Working on my latest React Native project, I decided to make the jump from React’s state to Redux.","tags":["Code","JavaScript","React Native","Redux"],"title":"A Simple React Native Redux Example"}}},"pageContext":{"slug":"/articles/a-simple-react-native-redux-example"}},"staticQueryHashes":["1251057998","251939775","401334301"]}