<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.0d48d3bcf21b70e49c10.css" id="gatsby-global-css">html{font-size:100}body{margin:0 0 0 calc(100vw - 100%);color:#222;line-height:1.625;font-size:1rem;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}body,h1,h2,h3,h4,h5,h6{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif}h1,h2,h3,h4,h5,h6{font-weight:600}h1{font-size:2.5rem;line-height:3.25rem;margin-top:6.5rem;margin-bottom:1.625rem}h2{font-size:1.6875rem;line-height:2.4375rem}h2,h3{margin-top:3.25rem;margin-bottom:.8125rem}h3{font-size:1.375rem;line-height:1.625rem}h4{font-size:1.2rem;margin-top:2.4375rem}h4,h5{line-height:1.625rem;margin-bottom:.8125rem}h5,h6{font-size:1rem;margin-top:4.0625rem}h6{line-height:1.625rem;margin-bottom:.8125rem}img{max-width:100%;margin:inherit auto}hr,img{border:0;display:block}hr{color:#222;height:1.625rem;margin:3.25rem auto;background-size:100% 26px;background-image:linear-gradient(180deg,transparent 1px,transparent 11px,#222 0,#222 15px,transparent 0,transparent 26px);width:6.25rem}a{color:#2e658f;text-decoration:none}a:active,a:focus,a:hover{color:#5ac18e}b,strong{font-weight:600}ul{list-style:square;margin-bottom:1.625rem}ul li{padding:0 .3125rem;margin-bottom:.625rem}p{line-height:1.625rem;margin-bottom:1.625rem}blockquote{padding:0;font-style:italic;text-align:center}figure{display:block;width:100%;height:auto}figcaption{line-height:1.21875rem;margin-top:.40625rem;color:#222;font-size:.75rem;font-style:italic;margin-bottom:0;text-align:center}.anchor{margin-left:-1.875rem!important;padding-right:.875rem!important}@media screen and (min-width:685px){figure.float-left,figure.float-right{max-width:19.375rem;padding:0 1.625rem}.float-right{float:right}.float-left{float:left}}code[class*=language-],pre[class*=language-]{font-size:12px;color:#f8f8f2;background:0 0;text-shadow:0 1px rgba(0,0,0,.3);font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#282a36}:not(pre)>code[class*=language-]{font-size:13px;padding:.3em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#6272a4}.token.punctuation{color:#f8f8f2}.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#ff79c6}.token.boolean,.token.number{color:#bd93f9}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#50fa7b}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.class-name,.token.function{color:#f1fa8c}.token.keyword{color:#8be9fd}.token.important,.token.regex{color:#ffb86c}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.Layout-module--layout--3Pyz6{max-width:66.875rem;margin-left:auto;margin-right:auto}.Layout-module--layout--3Pyz6:before{content:"";display:table}.Layout-module--layout--3Pyz6:after{content:"";display:table;clear:both}.Author-module--author--2Yefr{border-top:1px solid #e6e6e6;max-width:40rem;padding-top:1.25rem;line-height:1.625rem;margin-top:1.625rem;margin-bottom:3.25rem}.Author-module--author__bio-twitter--n-O9n{display:block;text-decoration:underline}@media screen and (min-width:685px){.Author-module--author--2Yefr{margin-left:auto;margin-right:auto}}.Content-module--content--3p512{max-width:59.0625rem;padding:0 1.25rem;margin:0 auto}.Content-module--content__title--2BDW9{margin-top:0;max-width:40rem;margin-left:auto;margin-right:auto;font-weight:600}.Content-module--content__body--2TrQ- figure{margin-bottom:1.625rem}.Content-module--content__body--2TrQ- figure blockquote{font-style:italic;text-align:center;margin-top:0;padding:1.625rem 0}.Content-module--content__body--2TrQ- figure blockquote p{max-width:40rem;font-size:1.1817rem;margin-top:0;margin-bottom:1.625rem;line-height:2.4375rem}.Content-module--content__body--2TrQ- a{text-decoration:underline}.Content-module--content__body--2TrQ- *{max-width:40rem;margin-left:auto;margin-right:auto}.Content-module--content__body--2TrQ- img{max-width:100%}@media screen and (min-width:960px){.Content-module--content--3p512{padding:0}.Content-module--content__body--2TrQ-,.Content-module--content__body--2TrQ- p{font-size:1rem;line-height:1.82813rem;margin-bottom:1.82813rem}}.Meta-module--meta__date--29eD7{font-style:italic}.Tags-module--tags--1L_ct{margin-bottom:.8125rem}.Tags-module--tags__list--91FqN{list-style:none;margin:0 -.625rem;padding:0}.Tags-module--tags__list-item--1M30P{display:inline-block;margin:.625rem .3125rem}.Tags-module--tags__list-item-link--3SL_8{display:inline-block;height:2.1875rem;padding:0 1.5rem;line-height:2.1875rem;border:1px solid #e6e6e6;text-decoration:none;border-radius:1.25rem;color:#222}.Tags-module--tags__list-item-link--3SL_8:focus,.Tags-module--tags__list-item-link--3SL_8:hover{color:#2e658f}.Post-module--post__comments--25y6I,.Post-module--post__footer--3WzWU{max-width:40rem;margin:0 auto;padding:0 1.25rem}@media screen and (min-width:960px){.Post-module--post__comments--25y6I,.Post-module--post__footer--3WzWU{padding:0}.Post-module--post__home-button--16Kl0{position:fixed;max-width:auto;margin:0;top:30px;left:30px}}.Author-module--author__title--3Vu60{font-size:1.125rem;font-weight:600;line-height:1.82813rem}.Author-module--author__title-link--3orkw,.Author-module--author__title-link--3orkw:focus,.Author-module--author__title-link--3orkw:hover{color:#222}@media screen and (min-width:685px){.Author-module--author--2X3SC{width:calc(33.3% - 1.25rem)}.Author-module--author--2X3SC:nth-child(1n){float:left;margin-right:1.875rem;clear:none}.Author-module--author--2X3SC:last-child{margin-right:0}.Author-module--author--2X3SC:nth-child(12n){margin-right:0;float:right}.Author-module--author--2X3SC:nth-child(12n+1){clear:both}}.Menu-module--menu__list-item-link--_5DwY{font-size:1rem;color:#222;font-weight:400;border:0}.Menu-module--menu__list-item-link--_5DwY:focus,.Menu-module--menu__list-item-link--_5DwY:hover{color:#2e658f;border-bottom:1px solid #2e658f}.Menu-module--menu__list-item-link--active--22put{color:#222;border-bottom:1px solid #222}.Menu-module--menu__list-item-link--_5DwY:not(:first-of-type){margin:0 0 0 1.625rem}.Topbar-module--topbar--xHw8-{max-width:40rem;margin-left:auto;margin-right:auto}.Topbar-module--topbar__inner--1dOQX{padding:0 1.25rem;margin-top:1.625rem;margin-bottom:2.4375rem}@media screen and (min-width:685px){.Topbar-module--topbar__inner--1dOQX{padding:0;margin-top:3.25rem;margin-bottom:3.25rem;line-height:1.8rem}}@media screen and (min-width:960px){.Topbar-module--topbar__inner--1dOQX{padding:0;margin-top:3.25rem;margin-bottom:3.25rem;line-height:1.8rem}}.Icon-module--icon--Gpyvw{display:inline-block;width:1em;height:1em;stroke-width:0;stroke:currentColor;fill:currentColor;font-style:normal;font-weight:400;speak:none;margin-right:.2em;text-align:center;font-variant:normal;text-transform:none;line-height:1em;margin-left:.2em;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.Contacts-module--contacts__list--3kMvi{display:flex;flex-flow:row wrap;flex-grow:0;flex-shrink:0;list-style:none;padding:0;margin:.625rem -.1875rem}.Contacts-module--contacts__list-item--3Cz7b{padding:0;margin:.25rem;display:flex;align-content:center;align-items:center;justify-content:center;height:2.1875rem;width:2.1875rem;line-height:2.1875rem;border-radius:50%;text-align:center;border:1px solid #ebebeb}.Contacts-module--contacts__list-item-link--2B4Ht{border:0;display:flex;color:#222}.Contacts-module--contacts__list-item-link--2B4Ht:focus,.Contacts-module--contacts__list-item-link--2B4Ht:hover{color:#2e658f}.About-module--about--Ip7_4{max-width:40rem;margin-left:auto;margin-right:auto}.About-module--about__inner--2VNJt{padding:0 1.25rem;margin-bottom:1.625rem}.About-module--about__inner--2VNJt figure{margin:0;padding:0}.About-module--about--Ip7_4 figure{margin:0 0 1rem 1rem;padding:0;float:right;width:9.375rem}.About-module--about--Ip7_4 figure img{border-radius:2%;background-clip:padding-box;width:9.375rem}.About-module--about__body--2M5ht a{color:#222;border-bottom:1px solid #bbb}.About-module--about__body--2M5ht a:focus,.About-module--about__body--2M5ht a:hover{color:#222;border-bottom:1px solid #222}@media screen and (min-width:685px){.About-module--about__inner--2VNJt{padding:0;margin-bottom:2.4375rem}.About-module--about__inner--2VNJt figure{margin:0 0 1rem 1rem;padding:0;width:12.5rem}.About-module--about__inner--2VNJt figure img{width:12.5rem}}@media screen and (min-width:960px){.About-module--about__inner--2VNJt{padding:0;margin-bottom:2.4375rem}.About-module--about__inner--2VNJt figure{margin:0 0 1rem 1rem;padding:0;width:12.5rem img;width-width:200px}}.Feed-module--feed__item--2D5rE{margin-bottom:.8125rem}.Feed-module--feed__item-title--3nigr{margin-top:0}.Feed-module--feed__item-title-link--iFMRs{color:#222;border-bottom:1px solid #bbb}.Feed-module--feed__item-title-link--iFMRs:focus,.Feed-module--feed__item-title-link--iFMRs:hover{color:#222;border-bottom:1px solid #222}.Feed-module--feed__item-meta-time--3t1fg{line-height:1.625rem;font-size:.75rem;color:#888;font-weight:600;text-transform:uppercase}.Feed-module--feed__item-meta-divider--N-Q0A{margin:0 .3125rem}.Feed-module--feed__item-meta-category-link--23f8F{font-size:.75rem;color:#5ac18e;font-weight:600;text-transform:uppercase}@media screen and (min-width:960px){.Feed-module--feed--37QKH{content:"";clear:both;display:table;min-width:640px}.Feed-module--feed__item--2D5rE{width:99.9%}.Feed-module--feed__item--2D5rE:nth-child(1n){float:left;margin-right:1.875rem;clear:none}.Feed-module--feed__item--2D5rE:last-child{margin-right:0}.Feed-module--feed__item--2D5rE:nth-child(1n){margin-right:0;float:right}.Feed-module--feed__item--2D5rE:nth-child(1n+1){clear:both}.Feed-module--feed__item-meta-time--3t1fg{width:calc(14.27143% - 1.60714rem)}.Feed-module--feed__item-meta-time--3t1fg:nth-child(1n){float:left;margin-right:1.875rem;clear:none}.Feed-module--feed__item-meta-time--3t1fg:last-child{margin-right:0}.Feed-module--feed__item-meta-time--3t1fg:nth-child(14n){margin-right:0;float:right}.Feed-module--feed__item-meta-time--3t1fg:nth-child(14n+1){clear:both}.Feed-module--feed__item-inner--1fgWN{width:calc(85.62857% - .26786rem)}.Feed-module--feed__item-inner--1fgWN:nth-child(1n){float:left;margin-right:1.875rem;clear:none}.Feed-module--feed__item-inner--1fgWN:last-child{margin-right:0}.Feed-module--feed__item-inner--1fgWN:nth-child(14n){margin-right:0;float:right}.Feed-module--feed__item-inner--1fgWN:nth-child(14n+1){clear:both}}.Copyright-module--copyright--1wsmF,.Daily-module--daily--2BsAZ{color:#b6b6b6;font-size:.75rem}.Daily-module--daily--2BsAZ{margin-bottom:.40625rem}.Footer-module--footer--VUGIP{max-width:40rem;margin-left:auto;margin-right:auto}.Footer-module--footer__inner--Meyx0{padding:0 1.25rem;margin-top:3.25rem;margin-bottom:1.625rem}@media screen and (min-width:685px){.Footer-module--footer__inner--Meyx0{padding:0;margin-top:3.25rem;margin-bottom:1.625rem}}@media screen and (min-width:960px){.Footer-module--footer__inner--Meyx0{padding:0;margin-top:3.25rem;margin-bottom:1.625rem}.Footer-module--footer__copyright--1jJLM{width:calc(49.95% - .9375rem)}.Footer-module--footer__copyright--1jJLM:nth-child(1n){float:left;margin-right:1.875rem;clear:none}.Footer-module--footer__copyright--1jJLM:last-child{margin-right:0}.Footer-module--footer__copyright--1jJLM:nth-child(2n){margin-right:0;float:right}.Footer-module--footer__copyright--1jJLM:nth-child(odd){clear:both}.Footer-module--footer__daily--Xh4hl{text-align:right}}.Page-module--page--2nMky{max-width:40rem;margin-left:auto;margin-right:auto;margin-bottom:1.625rem}.Page-module--page__inner--2M_vz{padding:0 1.25rem}.Page-module--page__title--GPD8L{margin:0;padding:0 0 1.625rem}@media screen and (min-width:685px){.Page-module--page__inner--2M_vz{padding:0}}@media screen and (min-width:960px){.Page-module--page__inner--2M_vz{padding:0}}.Articles-module--articles--2cRw9{max-width:40rem;margin-left:auto;margin-right:auto;margin-bottom:1.625rem}.Articles-module--articles__inner--3K8x1{padding:0 1.25rem}.Articles-module--articles--2cRw9 h4{margin:0;padding:1.625rem 0}@media screen and (min-width:685px){.Articles-module--articles__inner--3K8x1{padding:0;border-top:1px solid #e6e6e6}}@media screen and (min-width:960px){.Articles-module--articles__inner--3K8x1{padding:0;border-top:1px solid #e6e6e6}}.Projects-module--projects--lGaek{max-width:40rem;margin-left:auto;margin-right:auto;margin-bottom:1.625rem}.Projects-module--projects__inner--3DjHX{padding:0 1.25rem}.Projects-module--projects--lGaek h4{margin:0;padding:1.625rem 0}.Projects-module--projects--lGaek p:first-child{margin-top:0}.Projects-module--projects--lGaek a{color:#222;border-bottom:1px solid #bbb}.Projects-module--projects--lGaek a:focus,.Projects-module--projects--lGaek a:hover{color:#222;border-bottom:1px solid #222}@media screen and (min-width:685px){.Projects-module--projects__inner--3DjHX{padding:0;border-top:1px solid #e6e6e6;margin-bottom:2.4375rem}}@media screen and (min-width:960px){.Projects-module--projects__inner--3DjHX{padding:0;border-top:1px solid #e6e6e6;margin-bottom:2.4375rem}}.Contact-module--contact--1lFRw{max-width:40rem;margin-left:auto;margin-right:auto;margin-bottom:1.625rem}.Contact-module--contact__inner--1ri4q{padding:0 1.25rem}.Contact-module--contact--1lFRw h4{margin:0;padding:1.625rem 0}.Contact-module--contact--1lFRw p:first-child{margin-top:0}.Contact-module--contact--1lFRw a{color:#222;border-bottom:1px solid #bbb}.Contact-module--contact--1lFRw a:focus,.Contact-module--contact--1lFRw a:hover{color:#222;border-bottom:1px solid #222}@media screen and (min-width:685px){.Contact-module--contact__inner--1ri4q{padding:0;border-top:1px solid #e6e6e6;margin-bottom:2.4375rem}}@media screen and (min-width:960px){.Contact-module--contact__inner--1ri4q{padding:0;border-top:1px solid #e6e6e6;margin-bottom:2.4375rem}}</style><meta name="generator" content="Gatsby 2.32.12"/><link rel="alternate" type="application/rss+xml" title="Aaron Van Bokhoven - Software Developer" href="/rss.xml"/><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link rel="icon" href="/favicon-32x32.png?v=d2f3413ff13cfc81300c313cca06c226"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#2f3442"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=d2f3413ff13cfc81300c313cca06c226"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=d2f3413ff13cfc81300c313cca06c226"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=d2f3413ff13cfc81300c313cca06c226"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=d2f3413ff13cfc81300c313cca06c226"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=d2f3413ff13cfc81300c313cca06c226"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=d2f3413ff13cfc81300c313cca06c226"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=d2f3413ff13cfc81300c313cca06c226"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=d2f3413ff13cfc81300c313cca06c226"/><title data-react-helmet="true">Paperclip Amazon S3 Background Upload Using Starling and Workling</title><meta data-react-helmet="true" name="description" content="We know it’s very easy to add S3 support into Paperclip, and there’s tons of information on setting that up. It works flawless and it’s simple, yet your upload now takes twice as long in comparison to using your servers filesystem for storage. The problem is pretty obvious and I’ll explain why in this article."/><meta data-react-helmet="true" property="og:site_name" content="Paperclip Amazon S3 Background Upload Using Starling and Workling"/><meta data-react-helmet="true" property="og:image" content="https://aaronvb.com/photo.jpg"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:title" content="Paperclip Amazon S3 Background Upload Using Starling and Workling"/><meta data-react-helmet="true" name="twitter:description" content="We know it’s very easy to add S3 support into Paperclip, and there’s tons of information on setting that up. It works flawless and it’s simple, yet your upload now takes twice as long in comparison to using your servers filesystem for storage. The problem is pretty obvious and I’ll explain why in this article."/><meta data-react-helmet="true" name="twitter:image" content="https://aaronvb.com/photo.jpg"/><link as="script" rel="preload" href="/webpack-runtime-499a7fb7cf537864a2ce.js"/><link as="script" rel="preload" href="/framework-11348fb0fa7c3ad87864.js"/><link as="script" rel="preload" href="/app-c2230dad2af5e5884cbf.js"/><link as="script" rel="preload" href="/styles-407fe62976dc5310c43e.js"/><link as="script" rel="preload" href="/1f823af0e43d2ea1b3adfb0e5988d39af11c1880-cecec868bda66c10d010.js"/><link as="script" rel="preload" href="/component---src-templates-post-template-js-90a71460442b7576229f.js"/><link as="fetch" rel="preload" href="/page-data/articles/paperclip-amazon-s3-background-upload-using-starling-and-workling/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/1251057998.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/251939775.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/401334301.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="Layout-module--layout--3Pyz6"><div class="Topbar-module--topbar--xHw8-"><div class="Topbar-module--topbar__inner--1dOQX"><div class="Author-module--author--2X3SC"><span class="Author-module--author__title--3Vu60"><a class="Author-module--author__title-link--3orkw" href="/">Aaron Van Bokhoven</a></span></div><nav><a href="/#articles" class="Menu-module--menu__list-item-link--_5DwY">Articles</a><a href="/#projects" class="Menu-module--menu__list-item-link--_5DwY">Projects</a><a href="/aaronvb_resume.pdf" class="Menu-module--menu__list-item-link--_5DwY">Resume</a><a href="/#contact" class="Menu-module--menu__list-item-link--_5DwY">Contact</a></nav></div></div><div><div><div class="Content-module--content--3p512"><h2 class="Content-module--content__title--2BDW9">Paperclip Amazon S3 Background Upload Using Starling and Workling</h2><div class="Content-module--content__body--2TrQ-"><p>I spent several days searching for ANY information on background uploads to Amazon S3 with <a href="https://github.com/thoughtbot/paperclip" target="_blank" rel="nofollow noopener noreferrer">Paperclip</a> and I just couldn’t find anything concrete. There were a few posts on the Paperclip Google Code board that talked about it but with no clear examples of how to do it.</p>
<p>Anyway, we know it’s very easy to add S3 support into Paperclip, and there’s tons of information on setting that up. It works flawless and it’s simple, yet your upload now takes twice as long in comparison to using your servers filesystem for storage. The problem is pretty obvious and I’ll explain why in this example in case you’re wondering.</p>
<p>Example A(filesystem)</p>
<ol>
<li>User uploads a file</li>
<li>Application re sizes file into thumbnails</li>
</ol>
<p>Example B(Amazon S3)</p>
<ol>
<li>User uploads a file</li>
<li>Application re sizes file into thumbnails</li>
<li>Application then connects to Amazon S3 and uploads thumbnail</li>
<li>Repeat 3 until each thumbnail is uploaded</li>
</ol>
<p>As you can see in Example B, the more thumbnails you need the longer your upload is going to take because Paperclip needs to send each file to Amazon S3 one at time. All the while a user is still waiting for the website to respond back. If you use New Relic RPM you’ll notice that your Apdex gets destroyed by this. Which is basically telling you that a user is waiting longer than a second(more like 3-5 seconds) for an upload process.</p>
<p>Although there’s nothing that can be done about the initial upload, why does the user need to wait around while the application uploads to Amazon S3(which could take 2-5 seconds longer)?</p>
<p>I worked on several ways to get Paperclip to process it’s Amazon S3 storage in the background that led me to more complications than a solution. I realized I wanted to try my best to not modify the original Paperclip code so there wouldn’t be any problems updating Paperclip in the future.</p>
<p>The next idea was to have some sort of ‘syncing’ to Amazon S3 system. Let Paperclip upload to the filesystem, then have a background process move the files to Amazon S3, then delete the files off the filesystem.</p>
<p>Let’s assume you already have your rails app, starling/workling installed and running, and paperclip installed and working on the model of your choice. Let’s also assume we’re applying this to a User model and the attachment is an avatar. You’ll also need the aws-s3 gem(<a href="http://amazon.rubyforge.org" target="_blank" rel="nofollow noopener noreferrer">http://amazon.rubyforge.org</a>) and add that to your environment.rb.</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">sudo gem install aws-s3</code></pre></div>
<div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby"><span class="token comment">#environment.rb</span>
config<span class="token punctuation">.</span>gem <span class="token string">'aws-s3'</span><span class="token punctuation">,</span> <span class="token symbol">:lib</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">'aws/s3'</span></code></pre></div>
<p>First let’s modify the Paperclip settings in our User model.</p>
<div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby">has_attached_file   <span class="token symbol">:avatar</span><span class="token punctuation">,</span>
                    <span class="token symbol">:styles</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span> <span class="token symbol">:large</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">"800x800&amp;>"</span><span class="token punctuation">,</span> <span class="token symbol">:medium</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">"300x300&amp;>"</span><span class="token punctuation">,</span> <span class="token symbol">:thumb</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">"100x100#"</span><span class="token punctuation">,</span> <span class="token symbol">:tiny</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">"50x50#"</span><span class="token punctuation">,</span> <span class="token symbol">:really_tiny</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">"25x25#"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token symbol">:storage</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token symbol">:filesystem</span><span class="token punctuation">,</span>
                    <span class="token symbol">:url</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">"http://s3.amazonaws.com/webapps3bucketname/:attachment/:id/:style/:basename.:extension"</span><span class="token punctuation">,</span>
                    <span class="token symbol">:path</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">"tmp/paperclip_uploads/:attachment/:id/:style/:basename.:extension"</span></code></pre></div>
<p>The :url is set to the Amazon’s S3 link so that when we generate urls with object.avatar.url(:medium) it will output the Amazon S3 url instead of the filesystem path. I also set the :path to the location I want the file to be uploaded to and re sized. I chose the tmp folder since it seemed appropriate. (Note: I’m considering moving the location to system because it’s a shared folder across capistrano.)</p>
<p>A new column is needed for this model to let us know when the background uploading is being processed.</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">script/generate migration add_processing_upload_to_user processing_upload:boolean
rake db:migrate</code></pre></div>
<p>It’s your choice if you want to set the default to true, assuming upon creation of a User record that an upload will be included. In my case, a user gets created first and if the user decides to upload an avatar, it’s done through the user settings later, so  I set the default to false.</p>
<p>Next we’ll setup the worker which will handle the upload to Amazon S3.</p>
<div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby"><span class="token comment">#app/workers/paperclip_background_upload_worker.rb</span>
<span class="token keyword">class</span> <span class="token class-name">PaperclipBackgroundUploadWorker</span> <span class="token operator">&lt;</span> <span class="token constant">Workling</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">Base</span>
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">upload_to_amazon_s3</span></span><span class="token punctuation">(</span>options<span class="token punctuation">)</span>
    logger<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string">"Begin uploading <span class="token interpolation"><span class="token delimiter tag">#{</span>options<span class="token punctuation">[</span><span class="token symbol">:type</span><span class="token punctuation">]</span><span class="token delimiter tag">}</span></span> to Amazon S3..."</span><span class="token punctuation">)</span>
    <span class="token comment">#find the user and the avatar</span>
    <span class="token variable">@user</span> <span class="token operator">=</span> <span class="token constant">User</span><span class="token punctuation">.</span>find_by_id<span class="token punctuation">(</span>options<span class="token punctuation">[</span><span class="token symbol">:id</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token variable">@avatar</span> <span class="token operator">=</span> <span class="token variable">@user</span><span class="token punctuation">.</span>avatar

    <span class="token comment">#connect to amazon s3</span>
    logger<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string">"Connecting to Amazon S3..."</span><span class="token punctuation">)</span>
    <span class="token constant">AWS</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">S3</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">Base</span><span class="token punctuation">.</span>establish_connection<span class="token operator">!</span><span class="token punctuation">(</span>
                                        <span class="token symbol">:access_key_id</span>     <span class="token operator">=</span><span class="token operator">></span> <span class="token string">'ACCESSKEYID'</span><span class="token punctuation">,</span>
                                        <span class="token symbol">:secret_access_key</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">'SECRETACCESSKEY'</span>
                                        <span class="token punctuation">)</span>
    <span class="token comment">#first we store the original</span>
    logger<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string">"Uploading original image..."</span><span class="token punctuation">)</span>
    <span class="token constant">AWS</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">S3</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">S3Object</span><span class="token punctuation">.</span>store<span class="token punctuation">(</span><span class="token variable">@avatar</span><span class="token punctuation">.</span>path_s3<span class="token punctuation">(</span><span class="token symbol">:original</span><span class="token punctuation">)</span><span class="token punctuation">,</span> open<span class="token punctuation">(</span><span class="token string">"<span class="token interpolation"><span class="token delimiter tag">#{</span><span class="token constant">RAILS_ROOT</span><span class="token delimiter tag">}</span></span>/<span class="token interpolation"><span class="token delimiter tag">#{</span><span class="token variable">@avatar</span><span class="token punctuation">.</span>path<span class="token punctuation">(</span><span class="token symbol">:original</span><span class="token punctuation">)</span><span class="token delimiter tag">}</span></span>"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'YOUR_AMAZONS3_BUCKET_NAME'</span><span class="token punctuation">,</span> <span class="token symbol">:access</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token symbol">:public_read</span><span class="token punctuation">)</span>
    <span class="token comment">#then thumbnails</span>
    <span class="token variable">@avatar</span><span class="token punctuation">.</span>styles<span class="token punctuation">.</span><span class="token keyword">each</span> <span class="token keyword">do</span> <span class="token operator">|</span>key<span class="token punctuation">,</span> value<span class="token operator">|</span>
      logger<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string">"Uploading <span class="token interpolation"><span class="token delimiter tag">#{</span>key<span class="token delimiter tag">}</span></span> image..."</span><span class="token punctuation">)</span>
      <span class="token constant">AWS</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">S3</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">S3Object</span><span class="token punctuation">.</span>store<span class="token punctuation">(</span><span class="token variable">@avatar</span><span class="token punctuation">.</span>path_s3<span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">,</span> open<span class="token punctuation">(</span><span class="token string">"<span class="token interpolation"><span class="token delimiter tag">#{</span><span class="token constant">RAILS_ROOT</span><span class="token delimiter tag">}</span></span>/<span class="token interpolation"><span class="token delimiter tag">#{</span><span class="token variable">@avatar</span><span class="token punctuation">.</span>path<span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token delimiter tag">}</span></span>"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'YOUR_AMAZONS3_BUCKET_NAME'</span><span class="token punctuation">,</span> <span class="token symbol">:access</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token symbol">:public_read</span><span class="token punctuation">)</span>
    <span class="token keyword">end</span>
    <span class="token comment">#start clean up, files first then directories</span>
    logger<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string">"Removing original from local filesystem..."</span><span class="token punctuation">)</span>
    <span class="token comment">#remove original file</span>
    <span class="token builtin">File</span><span class="token punctuation">.</span>delete<span class="token punctuation">(</span><span class="token string">"<span class="token interpolation"><span class="token delimiter tag">#{</span><span class="token constant">RAILS_ROOT</span><span class="token delimiter tag">}</span></span>/<span class="token interpolation"><span class="token delimiter tag">#{</span><span class="token variable">@avatar</span><span class="token punctuation">.</span>path<span class="token punctuation">(</span><span class="token symbol">:original</span><span class="token punctuation">)</span><span class="token delimiter tag">}</span></span>"</span><span class="token punctuation">)</span>
    <span class="token comment">#remove thumbnail files</span>
    <span class="token variable">@avatar</span><span class="token punctuation">.</span>styles<span class="token punctuation">.</span><span class="token keyword">each</span> <span class="token keyword">do</span> <span class="token operator">|</span>key<span class="token punctuation">,</span> value<span class="token operator">|</span>
      logger<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string">"Removing <span class="token interpolation"><span class="token delimiter tag">#{</span>key<span class="token delimiter tag">}</span></span> from local filesystem..."</span><span class="token punctuation">)</span>
      <span class="token builtin">File</span><span class="token punctuation">.</span>delete<span class="token punctuation">(</span><span class="token string">"<span class="token interpolation"><span class="token delimiter tag">#{</span><span class="token constant">RAILS_ROOT</span><span class="token delimiter tag">}</span></span>/<span class="token interpolation"><span class="token delimiter tag">#{</span><span class="token variable">@avatar</span><span class="token punctuation">.</span>path<span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token delimiter tag">}</span></span>"</span><span class="token punctuation">)</span>
    <span class="token keyword">end</span>
    <span class="token comment">#delete directories</span>
    logger<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string">"Removing directories..."</span><span class="token punctuation">)</span>
    <span class="token comment">#remove original folder</span>
    <span class="token builtin">Dir</span><span class="token punctuation">.</span>delete<span class="token punctuation">(</span><span class="token string">"<span class="token interpolation"><span class="token delimiter tag">#{</span><span class="token constant">RAILS_ROOT</span><span class="token delimiter tag">}</span></span>/tmp/paperclip_uploads/avatars/<span class="token interpolation"><span class="token delimiter tag">#{</span><span class="token variable">@user</span><span class="token punctuation">.</span>id<span class="token delimiter tag">}</span></span>/original"</span><span class="token punctuation">)</span>
    <span class="token comment">#remove thumbnail folders</span>
    <span class="token variable">@avatar</span><span class="token punctuation">.</span>styles<span class="token punctuation">.</span><span class="token keyword">each</span> <span class="token keyword">do</span> <span class="token operator">|</span>key<span class="token punctuation">,</span> value<span class="token operator">|</span>
      <span class="token builtin">Dir</span><span class="token punctuation">.</span>delete<span class="token punctuation">(</span><span class="token string">"<span class="token interpolation"><span class="token delimiter tag">#{</span><span class="token constant">RAILS_ROOT</span><span class="token delimiter tag">}</span></span>/tmp/paperclip_uploads/avatars/<span class="token interpolation"><span class="token delimiter tag">#{</span><span class="token variable">@user</span><span class="token punctuation">.</span>id<span class="token delimiter tag">}</span></span>/<span class="token interpolation"><span class="token delimiter tag">#{</span>key<span class="token delimiter tag">}</span></span>"</span><span class="token punctuation">)</span>
    <span class="token keyword">end</span>
    <span class="token comment">#remove avatar user_id folder</span>
    <span class="token builtin">Dir</span><span class="token punctuation">.</span>delete<span class="token punctuation">(</span><span class="token string">"<span class="token interpolation"><span class="token delimiter tag">#{</span><span class="token constant">RAILS_ROOT</span><span class="token delimiter tag">}</span></span>/tmp/paperclip_uploads/avatars/<span class="token interpolation"><span class="token delimiter tag">#{</span><span class="token variable">@user</span><span class="token punctuation">.</span>id<span class="token delimiter tag">}</span></span>"</span><span class="token punctuation">)</span>

    <span class="token comment">#set processing to false now that we are finished</span>
    <span class="token variable">@user</span><span class="token punctuation">.</span>processing_upload <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token variable">@user</span><span class="token punctuation">.</span>save

    logger<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string">"Finished uploading to Amazon S3."</span><span class="token punctuation">)</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span></code></pre></div>
<p>This is pretty simple. The worker uses the aws-s3 gem to upload the files and once it finishes they get removed from the filesystem. You’ll need to include your Amazon S3 Access Key ID and Secret Access Key and also fill in your Amazon S3 Bucket name that the files are getting uploaded to where it says ‘YOUR<em>AMAZONS3</em>BUCKET<em>NAME”. You may also notice a new method named ’path</em>s3’ which I had to add to Paperclips attachment file.</p>
<p>Open up the ‘attachment.rb’ file in the ‘vendor/plugins/paperclip/lib/paperclip/’ folder.  Under ‘def initialize’ add the two ‘@path_s3 =’ lines code(around line 47):</p>
<div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby">      <span class="token variable">@dirty</span>             <span class="token operator">=</span> <span class="token boolean">false</span>
      <span class="token comment">#a new hash value and key for the s3 path we define in the model</span>
      <span class="token variable">@path_s3</span>           <span class="token operator">=</span> options<span class="token punctuation">[</span><span class="token symbol">:path_s3</span><span class="token punctuation">]</span>
      <span class="token variable">@path_s3</span>           <span class="token operator">=</span> <span class="token variable">@path_s3</span><span class="token punctuation">.</span>call<span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token keyword">if</span> <span class="token variable">@path_s3</span><span class="token punctuation">.</span>is_a<span class="token operator">?</span><span class="token punctuation">(</span><span class="token builtin">Proc</span><span class="token punctuation">)</span>

      normalize_style_definition
      initialize_storage</code></pre></div>
<p>Then scroll down, in the the same file, to about line 113 where there’s a method named ‘path’(def path style = nil #:nodoc:). Under that method we are going to make a new one.</p>
<div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby">    <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">path</span></span> style <span class="token operator">=</span> <span class="token keyword">nil</span> <span class="token comment">#:nodoc:</span>
      original_filename<span class="token punctuation">.</span><span class="token keyword">nil</span><span class="token operator">?</span> <span class="token operator">?</span> <span class="token keyword">nil</span> <span class="token punctuation">:</span> interpolate<span class="token punctuation">(</span><span class="token variable">@path</span><span class="token punctuation">,</span> style<span class="token punctuation">)</span>
    <span class="token keyword">end</span>

    <span class="token comment">#Added this for background uploading.&lt;br />    #This returns the path to the attachment in the s3 bucket.</span>
    <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">path_s3</span></span> style <span class="token operator">=</span> <span class="token keyword">nil</span>
      original_filename<span class="token punctuation">.</span><span class="token keyword">nil</span><span class="token operator">?</span> <span class="token operator">?</span> <span class="token keyword">nil</span> <span class="token punctuation">:</span> interpolate<span class="token punctuation">(</span><span class="token variable">@path_s3</span><span class="token punctuation">,</span> style<span class="token punctuation">)</span>
    <span class="token keyword">end</span></code></pre></div>
<p>This will let us define a new key value(:path<em>s3) in the has</em>attached<em>file hash in the User model. If you’re wondering what the ‘path</em>s3’ does, it determines the path within the Amazon S3 Bucket that the file gets saved to and by having it in our has<em>attached</em>file options, we can change this if we need to later on. Which I’ll show you next.</p>
<p>Back to the User model, we add a new line in the has<em>attached</em>file hash:</p>
<div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby">has_attached_file   <span class="token symbol">:avatar</span><span class="token punctuation">,</span>
                    <span class="token symbol">:styles</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span> <span class="token symbol">:large</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">"800x800&amp;>"</span><span class="token punctuation">,</span> <span class="token symbol">:medium</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">"300x300&amp;>"</span><span class="token punctuation">,</span> <span class="token symbol">:thumb</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">"100x100#"</span><span class="token punctuation">,</span> <span class="token symbol">:tiny</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">"50x50#"</span><span class="token punctuation">,</span> <span class="token symbol">:really_tiny</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">"25x25#"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token symbol">:storage</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token symbol">:filesystem</span><span class="token punctuation">,</span>
                    <span class="token symbol">:url</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">"http://s3.amazonaws.com/webapps3bucketname/:attachment/:id/:style/:basename.:extension"</span><span class="token punctuation">,</span>
                    <span class="token symbol">:path</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">"tmp/paperclip_uploads/:attachment/:id/:style/:basename.:extension"</span><span class="token punctuation">,</span>
                    <span class="token symbol">:path_s3</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">":attachment/:id/:style/:basename.:extension"</span></code></pre></div>
<p>Don’t forget to restart the server since the Paperclip plugin was modified and also restart workling to generate the new workling we created earlier.</p>
<p>The last part is to call the worker through Starling. In this example, the file upload is being handled normally through the User controller and the Update action.</p>
<div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby"><span class="token keyword">def</span> <span class="token method-definition"><span class="token function">update</span></span>
  <span class="token variable">@user</span><span class="token punctuation">.</span>attributes <span class="token operator">=</span> params<span class="token punctuation">[</span><span class="token symbol">:user</span><span class="token punctuation">]</span>
  <span class="token comment">#only set the processing_upload to true if an avatar file was uploaded</span>
  <span class="token comment">#if the file doesn't pass valiations, @user wont get saved and processing_upload stays false</span>
  <span class="token variable">@user</span><span class="token punctuation">.</span>processing_upload <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token keyword">if</span> params<span class="token punctuation">[</span><span class="token symbol">:user</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token symbol">:avatar</span><span class="token punctuation">]</span>
  <span class="token keyword">if</span> <span class="token variable">@user</span><span class="token punctuation">.</span>save
    flash<span class="token punctuation">[</span><span class="token symbol">:notice</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Your profile was successfully updated!"</span>
    <span class="token comment">#tell starling to start the background worker only if processing_upload is true</span>
    <span class="token comment">#the id of the user gets passed to let our worker know which files to upload</span>
    <span class="token constant">PaperclipBackgroundUploadWorker</span><span class="token punctuation">.</span>async_upload_to_amazon_s3<span class="token punctuation">(</span><span class="token symbol">:id</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token variable">@user</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token keyword">if</span> <span class="token variable">@user</span><span class="token punctuation">.</span>processing_upload
    <span class="token comment">#redirect to the edit page</span>
    redirect_to edit_user_path
  <span class="token keyword">else</span>
    <span class="token comment">#save failed</span>
    redirect_to <span class="token symbol">:action</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">'edit'</span>
    flash<span class="token punctuation">[</span><span class="token symbol">:notice</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Something went wrong while trying to update your profile."</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span></code></pre></div>
<p>That’s it! The next step is to create a way to let your users know that the file is being processed. All you have to do is check if processing_upload = true.</p>
<p>This is my first tutorial type of post so bear with me if I missed anything and please let me know asap! Also if you have any experience doing something similar to this, let me know!</p></div></div></div><div class="Post-module--post__footer--3WzWU"><div><p class="Meta-module--meta__date--29eD7">Published <!-- -->19<!-- --> <!-- -->Jul<!-- --> <!-- -->2009</p></div><div class="Tags-module--tags--1L_ct"><ul class="Tags-module--tags__list--91FqN"><li class="Tags-module--tags__list-item--1M30P"><a class="Tags-module--tags__list-item-link--3SL_8" href="/tag/code/">Code</a></li><li class="Tags-module--tags__list-item--1M30P"><a class="Tags-module--tags__list-item-link--3SL_8" href="/tag/ruby-on-rails/">Ruby on Rails</a></li></ul></div><div class="Author-module--author--2Yefr"><p>Software developer working with Ruby, Go, and JavaScript. Hobbyist street photographer and climber.</p><p><a class="Author-module--author__bio-twitter--n-O9n" href="https://twitter.com/aaronvb" rel="noopener noreferrer" target="_blank"><strong>Aaron Van Bokhoven</strong> on Twitter</a></p></div></div><div class="Post-module--post__comments--25y6I"><div id="inject-comments-for-uterances"></div></div></div><div class="Footer-module--footer--VUGIP"><div class="Footer-module--footer__inner--Meyx0"><div class="Footer-module--footer__copyright--1jJLM"><div class="Copyright-module--copyright--1wsmF">©2020 Aaron Van Bokhoven</div></div><div class="Footer-module--footer__daily--Xh4hl"><div class="Daily-module--daily--2BsAZ">Happy Thursday. ☕</div></div></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/articles/paperclip-amazon-s3-background-upload-using-starling-and-workling";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-1710eb3daa040b8ff904.js"],"app":["/app-c2230dad2af5e5884cbf.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-b0556ce5127c1a3e2490.js"],"component---src-templates-category-template-js":["/component---src-templates-category-template-js-9a43d30fbb16ee02cd3f.js"],"component---src-templates-index-template-js":["/component---src-templates-index-template-js-b5fead081561ab4b9ed5.js"],"component---src-templates-not-found-template-js":["/component---src-templates-not-found-template-js-1bebd62000e4526ad3c3.js"],"component---src-templates-post-template-js":["/component---src-templates-post-template-js-90a71460442b7576229f.js"],"component---src-templates-tag-template-js":["/component---src-templates-tag-template-js-5ab9dc0232ae8b2049ac.js"]};/*]]>*/</script><script src="/polyfill-1710eb3daa040b8ff904.js" nomodule=""></script><script src="/component---src-templates-post-template-js-90a71460442b7576229f.js" async=""></script><script src="/1f823af0e43d2ea1b3adfb0e5988d39af11c1880-cecec868bda66c10d010.js" async=""></script><script src="/styles-407fe62976dc5310c43e.js" async=""></script><script src="/app-c2230dad2af5e5884cbf.js" async=""></script><script src="/framework-11348fb0fa7c3ad87864.js" async=""></script><script src="/webpack-runtime-499a7fb7cf537864a2ce.js" async=""></script></body></html>